<!DOCTYPE html>
<html lang="en">
<head>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106754474-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-106754474-1');
</script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>Programming with Refinement Types</title>

    <link href="./css/bootstrap.css" rel="stylesheet">
    <link href="./css/bootstrap-theme.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./css/rust-book.css">
    <link rel="stylesheet" type="text/css" href="./css/editor.css">
    <link rel="stylesheet" type="text/css" href="./css/short-tutorial.css">

   
    <style type="text/css">code{white-space: pre;}

      .dropdown-menu {
          min-width: 0px;
      }
      
      #checker-status {
          width: 30;
          height: 20;
          padding-top: 2px;
          padding-right: 10px;
          position: absolute;
          top: 0;
          right: 0;
          z-index:99;
      }
    </style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>


<!-- <script type="text/javascript" src="js/jquery/jquery-1.7.1.min.js"></script> -->
<script type="text/javascript" src="./js/jquery/jquery-2.0.3.min.js"></script>
<script type="text/javascript" src="./js/angular/angular.js"></script>
<script type="text/javascript" src="./js/bootstrap/bootstrap.js"></script>
<script type="text/javascript" src="./js/short-tutorial.js"></script>

<!-- MATHJAX TEMPLATES GO HERE -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
    extensions: ["color.js"],
    Macros: {
      True: "\\mathit{True}",
      RR:   "{\\bf R}",
      Int:  "\\mathtt{Int}",
      Nat:  "\\mathtt{Nat}",
      Zero: "\\mathtt{Zero}",
      foo:   ["{\\bf Jhala FOO #1}", 1],
      kvar:  ["{\\color[rgb]{1,0,0}{K_{#1}({#2})}}", 2],
      bindx: ["{{#1}\\!:\\!{#2}}", 2],
      reft:  ["\\{\\bindx{#1}{#2} \\mid {#3}\\}", 3],
      ereft: ["\\bindx{#1}{\\{#2 \\mid #3\\}}", 3],
      reftx: ["\\{{#1}\\mid{#2}\\}", 2],
      inferrule: ["\\frac{#2}{#3}\\;{#1}", 3],
      tcap:  ["(\\mathtt{intersection}\\ #1\\ #2)", 2],
      tcup:  ["(\\mathtt{union}\\ #1\\ #2)", 2],
      tsng:  ["(\\mathtt{singleton}\\ #1)", 1]
  }
  }
});
</script>

<!-- GITHUB -->
<script
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
  type="text/javascript"></script>
  
<!-- LOCAL 

  <script src="js/MathJax-2.6.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    type="text/javascript"></script>
    
  -->
  







</head>
<body class="rustdoc" data-spy="scroll" data-target=".bs-docs-sidebar" ng-app="liquidDemo" ng-controller="LiquidDemoCtrl">

    <div id="nav">
       <button id="toggle-nav" class="toggle-nav">
         <span class="sr-only">Toggle navigation</span>
         <span class="bar"></span>
         <span class="bar"></span>
         <span class="bar"></span>
       </button>
    </div>

<div id='toc' class='mobile-hidden'>
<ul class='chapter'>
<li><a href='Tutorial_01_Introduction.html'><b>1.</b>Introduction {#intro}</a></li>
<ul class='section'>
<li><a href='Tutorial_01_Introduction.html#'><b>1.1.</b> Well-Typed Programs Do Go Wrong {#gowrong}</a></li>
<li><a href='Tutorial_01_Introduction.html#'><b>1.2.</b> Refinement Types</a></li>
</ul>
<li><a href='Tutorial_03_Basic.html'><b>2.</b>Refinement Types</a></li>
<ul class='section'>
<li><a href='Tutorial_03_Basic.html#'><b>2.1.</b> Defining Types {#definetype}</a></li>
<li><a href='Tutorial_03_Basic.html#'><b>2.2.</b> Errors</a></li>
<li><a href='Tutorial_03_Basic.html#'><b>2.3.</b> Subtyping</a></li>
<li><a href='Tutorial_03_Basic.html#'><b>2.4.</b> Writing Specifications</a></li>
<li><a href='Tutorial_03_Basic.html#'><b>2.5.</b> Refining Function Types: Post-conditions</a></li>
<li><a href='Tutorial_03_Basic.html#'><b>2.6.</b> Dependent Refinements</a></li>
</ul>
<li><a href='Tutorial_05_Datatypes.html'><b>3.</b>Refined Datatypes {#refineddatatypes}</a></li>
<ul class='section'>
<li><a href='Tutorial_05_Datatypes.html#'><b>3.1.</b> Sparse Vectors {#autosmart}</a></li>
</ul>
<li><a href='Tutorial_09_Case_Study_Lazy_Queues.html'><b>4.</b>Case Study: Okasaki's Lazy Queues {#lazyqueue}</a></li>
<ul class='section'>
<li><a href='Tutorial_09_Case_Study_Lazy_Queues.html#'><b>4.1.</b> Queues</a></li>
<li><a href='Tutorial_09_Case_Study_Lazy_Queues.html#'><b>4.2.</b> Sized Lists</a></li>
<li><a href='Tutorial_09_Case_Study_Lazy_Queues.html#'><b>4.3.</b> Queue Type</a></li>
<li><a href='Tutorial_09_Case_Study_Lazy_Queues.html#'><b>4.4.</b> Queue Operations</a></li>
<li><a href='Tutorial_09_Case_Study_Lazy_Queues.html#'><b>4.5.</b> Recap of everyting!</a></li>
</ul>
</ul>

</div>
      
       <div id="checker-status">
         <!-- Verifying ... -->
         <button class="btn btn-xs btn-link actbutton" type="button" style="font-size:30px; z-index:1"
                ng-show="isChecking" ng-click="verifySource()">
          <span class="glyphicon glyphicon-hourglass"></span>
         </button>

        
         <!-- Safe -->
         <button class="btn btn-xs btn-link actbutton" type="button" style="font-size:30px; color:green; z-index:1"
                 ng-show="isSafe">
           <span class="glyphicon glyphicon-ok"></span>
         </button>

         <div class="dropdown" ng-show="isBad">
             <button class="btn btn-xs btn-link dropdown-toggle"
                     type="button"
                     id="errorblockdropdown"
                     data-toggle="dropdown"
                     style="font-size:30px; color:red; z-index:1">
               <span class="glyphicon glyphicon-remove" style="vertical-align:middle"></span><font size="4">{{errorBlocks.length}}</font>
               </span>
             </button>
             <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
               <li ng-repeat="err in errorBlocks">
                 <a tabindex="-1" ng-href="#program-{{err.data}}">{{err.index}}</a>
               </li>
             </ul>
         </div>
       </div>
       

<div id='page-wrapper'>
<div id='page'>

<section id="refinement-types" class="level1">
<h1>Refinement Types</h1>
<div class="hidden">
<div id="program-pane-0" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-0" class="programbox">{-@ LIQUID "--short-names" @-}
{-@ LIQUID "--no-termination" @-}
module Tutorial_03_Basic where

import Prelude hiding (abs)
divide  :: Int -> Int -> Int
die     :: String -> a
-- {-@ fail nonsense  @-}
-- {-@ fail canDie    @-}
-- {-@ fail divide'   @-}
-- {-@ fail avg       @-}
-- {-@ ignore lAssert @-}

</div>
</div>

</div>

<p><br />
<strong>What is a Refinement Type?</strong> In a nutshell,</p>
<blockquote>
<p><em>Refinement Types</em> = <em>Types</em> + <em>Predicates</em></p>
</blockquote>
<p> That is, refinement types allow us to decorate types with
<em>logical predicates</em>, which you can think of as
<em>boolean-valued</em> Haskell expressions, that constrain the set of
values described by the type. This lets us specify sophisticated
invariants of the underlying values.</p>
<section id="definetype" class="level2">
<h2>Defining Types</h2>
<p>Let us define some refinement types:</p>
<div id="program-pane-1" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-1" class="programbox">{-@ type Zero    = {v:Int | v == 0} @-}
{-@ type NonZero = {v:Int | v /= 0} @-}</div>
</div>

<p><br />
<strong>The Value Variable</strong> <code>v</code> denotes the set of
valid inhabitants of each refinement type. Hence, <code>Zero</code>
describes the <em>set of</em> <code>Int</code> values that are equal to
<code>0</code>, that is, the singleton set containing just
<code>0</code>, and <code>NonZero</code> describes the set of
<code>Int</code> values that are <em>not</em> equal to <code>0</code>,
that is, the set <code>{1, -1, 2, -2, ...}</code> and so on.</p>
<p><br />
<strong>To use</strong> these types we can write:</p>
<div id="program-pane-2" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-2" class="programbox">{-@ zero :: Zero @-}
zero  = 0 :: Int

{-@ one, two, three :: NonZero @-}
one   = 1 :: Int
two   = 2 :: Int
three = 3 :: Int</div>
</div>

</section>
<section id="errors" class="level2">
<h2>Errors</h2>
<p>If we try to say nonsensical things like:</p>
<div id="program-pane-3" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-3" class="programbox">nonsense :: Int
nonsense = one'
  where
  {-@ one' :: Zero @-}
  one' = 1 </div>
</div>

<p> LiquidHaskell will complain with an error message:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">../liquidhaskell-tutorial/src/03-basic.lhs:72:3-6:</span> Error: Liquid Type Mismatch</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">72</span> <span class="kw">|</span>   <span class="ex">one</span><span class="st">&#39; = 1 :: Int</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="st">       ^^^^</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="st">  Inferred type</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="st">    VV : {VV : Int | VV == (1 : int)}</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="st">  not a subtype of Required type</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="st">    VV : {VV : Int | VV == 0}</span></span></code></pre></div>
<p> The message says that the expression <code>1 :: Int</code> has the
type</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>    <span class="ex">{v:Int</span> <span class="kw">|</span> <span class="ex">v</span> == 1}</span></code></pre></div>
<p> which is <em>not</em> (a subtype of) the <em>required</em> type</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>    <span class="ex">{v:Int</span> <span class="kw">|</span> <span class="ex">v</span> == 0}</span></code></pre></div>
<p> as <code>1</code> is not equal to <code>0</code>.</p>
</section>
<section id="subtyping" class="level2">
<h2>Subtyping</h2>
<p>What is this business of <em>subtyping</em>? Suppose we have some
more refinements of <code>Int</code></p>
<div id="program-pane-4" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-4" class="programbox">{-@ type Nat      = {v:Int | 0 <= v}        @-}
{-@ type Positive = {v:Int | 0 < v}         @-}
{-@ type Even     = {v:Int | v mod 2 == 0 } @-}
{-@ type Lt100  = {v:Int | v < 100}         @-}</div>
</div>

<p><code>Zero</code> is the most precise type for <code>0::Int</code>,
as it is a <em>subtype</em> of <code>Nat</code>, <code>Even</code> and
<code>Lt100</code>. However, it is not a subtype of
<code>Positive</code>.</p>
<div class="interact">
<p>Now let us try a new predicate. Write a type for the numbers that
represent a percentage (between 0 and 100) by replacing the
<code>TRUE</code> predicate. Then run the code, and the first example
should be correct and the second should not.</p>
<div id="program-pane-5" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-5" class="programbox">{-@ type Percentage = TRUE  @-}

{-@ percentT  :: Percentage  @-}
percentT    = 10 :: Int
{-@ percentF  :: Percentage  @-}
percentF :: Int
percentF    = 10 + 99 :: Int</div>
</div>

</div>
<p><br />
<strong>In Summary</strong> the key points about refinement types
are:</p>
<ol type="1">
<li>A refinement type is just a type <em>decorated</em> with logical
predicates.</li>
<li>A term can have <em>different</em> refinements for different
properties.</li>
<li>When we <em>erase</em> the predicates we get the standard Haskell
types.</li>
</ol>
</section>
<section id="writing-specifications" class="level2">
<h2>Writing Specifications</h2>
<p>We can also add specifications as pre- and post-conditions of
functions.</p>
<p>Remember the divide function from before? We can add the case of
dividing by zero with this <code>die "message"</code> to indicate that
this case should be handled before running the code.</p>
<div id="program-pane-6" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-6" class="programbox">divide'     :: Int -> Int -> Int
divide' n 0 = die "divide by zero"
divide' n d = n `div` d</div>
</div>

<p>So, now we can specify that the first case will never with a
<em>pre-condition</em> that says that the second argument is
non-zero:</p>
<div id="program-pane-7" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-7" class="programbox">{-@ divide :: Int -> NonZero -> Int @-}
divide _ 0 = die "divide by zero"
divide n d = n `div` d</div>
</div>

<p>You can run the both pieces of code and check that the first one
throws an error while the second one does not since it can infer that
the first case will not be called.</p>
<p>The above signature forces us to ensure that that when we
<em>use</em> <code>divide</code>, we only supply provably
<code>NonZero</code> arguments.</p>
<div class="interact" id="question1" style="width=640px;border= 2px solid #3498db; border-radius= 10px;">
<p>
Select which of the following functions that call divide would <b>raise
an error:</b>
</p>
<label class="container"> abc x y = divide (x + y) 2
<input type="radio" name="q3" value="1"> <span class="checkmark"></span>
</label><br> <label class="container"> efg x y z = divide (divide (x +
y) 3) 10 <input type="radio" name="q3" value="2"><span
class="checkmark"></span> </label><br> <label class="container"> hij x y
z = divide (x + y) z <input type="radio" name="q3" value="3"><span
class="checkmark"></span> </label><br>
<button class="btn-select" onclick="checkAnswer(3)">Submit</button>
<p id="result3">
</p>
<p><input type="hidden" id="correctAnswer3" value="3"></p>
<button class="btn-answer" onclick="toggleCollapsible(3)">
Answer</button>
<div id="collapsibleDiv3">
<pre><code>`hij` is the invocation that could trigger a crash since we have no guarantees that z is a `NonZero` value. 

&lt;/div&gt;</code></pre>
</div>
<p><br/></p>
</section>
<section id="refining-function-types-post-conditions" class="level2">
<h2>Refining Function Types: Post-conditions</h2>
<p>Next, letâ€™s see how we can use refinements to describe the
<em>outputs</em> of a function. Consider the following simple
<em>absolute value</em> function</p>
<div id="program-pane-8" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-8" class="programbox">abs           :: Int -> Int
abs n
  | 0 < n     = n
  | otherwise = 0 - n</div>
</div>

<p>We can use a refinement on the output type to specify that the
function returns non-negative values</p>
<div id="program-pane-9" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-9" class="programbox">{-@ abs :: Int -> Nat @-}</div>
</div>

<p>LiquidHaskell <em>verifies</em> that <code>abs</code> indeed enjoys
the above type by deducing that <code>n</code> is trivially non-negative
when <code>0 &lt; n</code> and that in the <code>otherwise</code> case,
the value <code>0 - n</code> is indeed non-negative.</p>
</section>
<section id="dependent-refinements" class="level2">
<h2>Dependent Refinements</h2>
<p>The predicates in pre- and post- conditions can also refer to
previous arguments of the function.</p>
<p>For example, including that the output is greater than the input.</p>
<div id="program-pane-10" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-10" class="programbox">{-@ plus1 :: a:Int -> {b:Int |b > a}@-}
plus1 :: Int -> Int 
plus1 a = a + 1</div>
</div>

<p>And the same could be done between input values.</p>
<div class="interact">
<div id="List Average" class="hwex">
<p><br />
<strong>Exercise: (List Average): </strong>Can you now put everything
together?</p>
<p>Write a specification for the method <code>calcPer</code> that: 1)
first receives a positive int; 2) then an int with a value between zero
and the first int; 3) returns a percentage;</p>
<p>Try using the aliases created before.</p>
<br />
<br />

</div>
<div id="program-pane-11" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-11" class="programbox">calcPer       :: Int -> Int -> Int
calcPer a b    = (b * 100) `div` a


cpc = calcPer 10 5 :: Int  -- should be correct
cpi = calcPer 10 11 :: Int -- should be incorrect</div>
</div>

<div>
<button class="btn-answer" onclick="toggleCollapsible(1)">
Answer</button>
<div id="collapsibleDiv1">
<code>{-@ calcPer :: a:Positive -&gt; {b:Int | 0 &lt;= b &amp;&amp; b &lt;= a} -&gt; c:Percentage @-}</code>
</div>
</div>
</div>
<p><a href="Tutorial_05_Datatypes.html" >
<button class="btn-next">Next</button> </a></p>
</section>
</section>

</div>
</div>

<div class="hidden">
<!--Site Meter -->
  <script type="text/javascript" src="//s23.sitemeter.com/js/counter.js?site=s23liquidtypes"></script>
  <noscript>
    <a href="http://s23.sitemeter.com/stats.asp?site=s23liquidtypes" 
      target="_top">
      <img src="http://s23.sitemeter.com/meter.asp?site=s23liquidtypes" 
      alt="Site Meter" border="0"/></a>
  </noscript>
  <!-- Copyright (c)2009 Site Meter -->
</div>





<!-- JavaScript below! ============================================== -->

  <script src="./js/ace/ace.js" type="text/javascript" charset="utf-8"></script> 
  <script src="./js/ace/theme-monokai.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/ace/mode-haskell.js"  type="text/javascript" charset="utf-8"></script>
  <script src="./js/liquid/tooltip.js"></script> 
  <script src="./js/liquid/annot.js"></script> 
  <script src="./js/liquid/config.js"></script> 
  <script src="./js/liquid/liquid.js"></script>

  <script type="text/javascript">
    var queryServerURL = "https://liquid-demo.programming.systems/" ;
  </script>
  
  <!-- rust nav JS --> 
  <script type="text/javascript">
    window.playgroundUrl = "";
  </script>
  
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {

 document.getElementById("toggle-nav").onclick = toggleNav;

  function toggleNav() {
    var toc         = document.getElementById("toc");
    var pagewrapper = document.getElementById("page-wrapper");
    var status      = document.getElementById("checker-status");

    toggleClass(toc,         "mobile-hidden");
    // toggleClass(status,      "mobile-hidden");
    toggleClass(pagewrapper, "mobile-hidden");
  };

  function toggleClass(el, className) {
     // from http://youmightnotneedjquery.com/
     if (el.classList) {
       el.classList.toggle(className);
     } else {
       var classes = el.className.split(' ');
       var existingIndex = classes.indexOf(className);

       if (existingIndex >= 0) {
         classes.splice(existingIndex, 1);
       } else {
         classes.push(className);
       }
       el.className = classes.join(' ');
     }
  }
});
</script>
</body>
</html>
